# ë¹„ëª¨ìˆ˜ ë¶„ì„ íŒ¨í‚¤ì§€ ì‚¬ìš© ê°€ì´ë“œ

## 1. ê°œìš”
ë³¸ ë¬¸ì„œëŠ” `03_Code/src/nonparametric_analysis` íŒ¨í‚¤ì§€ì˜ ì„¤ì¹˜, ì‹¤í–‰ ë° í™œìš© ë°©ë²•ì„ ì„¤ëª…í•˜ëŠ” ìš´ì˜ ë§¤ë‰´ì–¼ì…ë‹ˆë‹¤. ì´ íŒ¨í‚¤ì§€ëŠ” `02_ì´ë¡ ê°€ì´ë“œ`ì— ê¸°ë°˜í•œ 17ì¢…ì˜ ë¹„ëª¨ìˆ˜ í†µê³„ ë¶„ì„ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## 2. íŒ¨í‚¤ì§€ êµ¬ì¡°

```text
03_Code/src/nonparametric_analysis/
â”œâ”€â”€ core/                        # ë¶„ì„ í•¨ìˆ˜ (ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¦¬)
â”‚   â”œâ”€â”€ single_variable.py      #   ì •ê·œì„±, ëŸ°, ì¶”ì„¸, ë³€ê³¡ì , PELT
â”‚   â”œâ”€â”€ group_comparison.py     #   Mann-Whitney, K-S, Wilcoxon, Kruskal, Friedman
â”‚   â”œâ”€â”€ correlation.py          #   Spearman, Kendall, Distance ìƒê´€ë¶„ì„
â”‚   â””â”€â”€ resampling.py           #   Bootstrap, Permutation
â”œâ”€â”€ utils/                       # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ stats.py                #   í†µê³„ í—¬í¼ (íš¨ê³¼ í¬ê¸°, FDR ë³´ì • ë“±)
â”‚   â”œâ”€â”€ integrity.py            #   ë°ì´í„° ë¬´ê²°ì„± ê²€ì‚¬
â”‚   â””â”€â”€ sample.py               #   ìƒ˜í”Œ ë°ì´í„° ìƒì„± ë¡œì§
â”œâ”€â”€ visualization/
â”‚   â””â”€â”€ setup.py                #   í•œê¸€ í°íŠ¸/ì‹œê°í™” ì„¤ì •
â””â”€â”€ analysis/                    #   ê¸°ì¡´ import í˜¸í™˜ìš© ë˜í¼
```

- **`core/`**: í•µì‹¬ ë¶„ì„ í•¨ìˆ˜ (17ì¢…, ì‹œê°í™” í¬í•¨)
- **`utils/`**: í†µê³„ ìœ í‹¸ë¦¬í‹° (íš¨ê³¼ í¬ê¸°, FDR ë³´ì •, ë°ì´í„° ê²€ì¦)
- **`visualization/`**: ì‹œê°í™” ìŠ¤íƒ€ì¼ ì„¤ì • (í•œê¸€ í°íŠ¸ ì§€ì›)
- **`analysis/`**: ê¸°ì¡´ import ê²½ë¡œ í˜¸í™˜ìš© (`from nonparametric_analysis.analysis import ...`)

## 3. ì‚¬ì „ ì¤€ë¹„ (uv ì„¤ì¹˜)

ì´ í”„ë¡œì íŠ¸ëŠ” Python íŒ¨í‚¤ì§€ ê´€ë¦¬ì **uv**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¡œ ìµœì´ˆ 1íšŒ ì„¤ì¹˜í•˜ì„¸ìš”.

```bash
# macOS / Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

ì„¤ì¹˜ í›„ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤:

```bash
uv sync --extra dev
```

> Pythonì€ ë³„ë„ ì„¤ì¹˜í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. uvê°€ í•„ìš”í•œ Python 3.11ì„ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.

## 4. ì‹¤í–‰ ë°©ë²• (ìë™í™” íŒŒì´í”„ë¼ì¸)

í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì „ì²´ ë¶„ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# ê¸°ë³¸ ì‹¤í–‰ (sample ë°ì´í„° ì‚¬ìš©)
python 03_Code/scripts/run_nonparametric_analysis.py

# ì˜µì…˜ ì§€ì • ì‹¤í–‰
python 03_Code/scripts/run_nonparametric_analysis.py --input "ë‚´_ë°ì´í„°.csv" --output "Result_Folder"
```

### ì‹¤í–‰ ê²°ê³¼ë¬¼ (`05_Outputs`)
- **`figures/`**: ê° ë³€ìˆ˜ë³„ ë¶„ì„ ì°¨íŠ¸ (PNG ì´ë¯¸ì§€)
- **`summary.csv`**: ì „ì²´ ë¶„ì„ ê²°ê³¼ ìš”ì•½ (í†µê³„ëŸ‰, P-value, í•´ì„ í¬í•¨)
- **`integrity_check.csv`**: ë°ì´í„° ê²°ì¸¡ì¹˜/ì´ìƒì¹˜ ë¦¬í¬íŠ¸

## 5. ë…¸íŠ¸ë¶ì—ì„œ ë³¸ì¸ ë°ì´í„°ë¡œ ë¶„ì„í•˜ê¸° (ê¶Œì¥)

### 5.1 ë¹ ë¥¸ ì‹œì‘ (ì„¤ì • ì…€ë§Œ ìˆ˜ì •)

`04_Notebooks/nonparametric_analysis_template.ipynb`ì„ ì—´ê³  **ì„¤ì • ì…€ í•˜ë‚˜ë§Œ ìˆ˜ì •**í•˜ë©´ ë©ë‹ˆë‹¤:

```python
# ============================================================
#   ğŸ”§ ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ì„¸ìš”! (ë¶„ì„ ì„¤ì •)
# ============================================================

# 0. ë°ì´í„° ì…ë ¥ ë°©ì‹ ì„ íƒ
#    ë°©ë²• A: CSV íŒŒì¼ â†’ FILE_NAMEì— íŒŒì¼ëª… ì…ë ¥ (ê¸°ë³¸)
#    ë°©ë²• B: ë³µì‚¬/ë¶™ì—¬ë„£ê¸° â†’ PASTE_DATAì— ë°ì´í„° ì§ì ‘ ë¶™ì—¬ë„£ê¸°
#           (DRM ë¬¸ì„œ ë“± íŒŒì¼ ì €ì¥ì´ ì–´ë ¤ìš´ ê²½ìš° ì‚¬ìš©)
PASTE_DATA = """
"""

FILE_NAME       = "my_data.csv"       # PASTE_DATAê°€ ë¹„ì–´ìˆì„ ë•Œë§Œ ì‚¬ìš©
TARGET_COLUMN   = "ë§¤ì¶œì•¡"             # ë¶„ì„í•  ìˆ«ì ì»¬ëŸ¼

# ë‘ ê·¸ë£¹ ë¹„êµ (ì„ íƒ) - ì•ˆ í•˜ë©´ ë¹ˆ ë¬¸ìì—´ë¡œ
GROUP_COLUMN    = "ì§€ì—­"
GROUP_A_VALUE   = "ì„œìš¸"
GROUP_B_VALUE   = "ë¶€ì‚°"

# ì „/í›„ ë¹„êµ (ì„ íƒ) - ì•ˆ í•˜ë©´ ë¹ˆ ë¬¸ìì—´ë¡œ
BEFORE_COLUMN   = ""
AFTER_COLUMN    = ""

# ë‹¤ì¤‘ ê·¸ë£¹ ë¹„êµ (ì„ íƒ) - ì•ˆ í•˜ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ
MULTI_GROUP_VALUES = []

# ë°˜ë³µ ì¸¡ì • ë¹„êµ (ì„ íƒ) - ì•ˆ í•˜ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ
REPEATED_COLUMNS   = []

# ìƒê´€ë¶„ì„ ì»¬ëŸ¼ (ë¹„ì›Œë‘ë©´ ëª¨ë“  ìˆ«ì ì»¬ëŸ¼ ìë™ ì‚¬ìš©)
CORRELATION_COLUMNS = []
```

- **CSV íŒŒì¼ ì‚¬ìš©**: `FILE_NAME`ì— íŒŒì¼ëª…ì„ ì…ë ¥í•˜ê³  `PASTE_DATA`ëŠ” ë¹„ì›Œë‘¡ë‹ˆë‹¤
- **ë³µì‚¬/ë¶™ì—¬ë„£ê¸° ì‚¬ìš©**: `PASTE_DATA`ì˜ `"""` ì‚¬ì´ì— ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤ (ì‰¼í‘œ/íƒ­ ìë™ ì¸ì‹)
- ë°ì´í„° ê²€ì¦ ì…€ì´ ì„¤ì •ê°’ì„ ìë™ìœ¼ë¡œ í™•ì¸í•˜ê³ , ì˜¤ë¥˜ ì‹œ í•œêµ­ì–´ ì•ˆë‚´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤
- ë¯¸ì„¤ì • ë¶„ì„(ê·¸ë£¹ë¹„êµ, ì „/í›„ ë¹„êµ ë“±)ì€ ì—ëŸ¬ ì—†ì´ ìë™ìœ¼ë¡œ ê±´ë„ˆëœë‹ˆë‹¤
- ë°ì´í„° í˜•ì‹ ì•ˆë‚´: `02_Data/ë°ì´í„°_ì¤€ë¹„_ê°€ì´ë“œ.md` ì°¸ê³ 

### 5.2 ê°œë³„ í•¨ìˆ˜ ì§ì ‘ í˜¸ì¶œ

Python ì½”ë“œì—ì„œ ê°œë³„ í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```python
import sys
from pathlib import Path
import matplotlib.pyplot as plt
import pandas as pd

%matplotlib inline
sys.path.append(str(Path('../03_Code/src').resolve()))

from nonparametric_analysis.analysis import nonparametric_methods as np_methods
from nonparametric_analysis.analysis.visualizations import setup_visualization

setup_visualization()

# ì •ê·œì„± ê²€ì •
res = np_methods.test_normality(data, name="Feature")

# ì¶”ì„¸ ë¶„ì„
res = np_methods.mann_kendall_test(data)

# ê·¸ë£¹ ë¹„êµ
res = np_methods.mann_whitney_test(group1, group2, name1="A", name2="B")
```

> **ì°¸ê³ **: `matplotlib.use('Agg')` ëŒ€ì‹  `%matplotlib inline`ì„ ì‚¬ìš©í•´ì•¼ Jupyterì—ì„œ ì°¨íŠ¸ê°€ ì •ìƒ ì¶œë ¥ë©ë‹ˆë‹¤.

## 6. ì£¼ìš” ë¶„ì„ ê¸°ëŠ¥ ëª©ë¡

| ê¸°ëŠ¥ | í•¨ìˆ˜ëª… | ì„¤ëª… |
|------|-------|------|
| **ì •ê·œì„±** | `test_normality` | íˆìŠ¤í† ê·¸ë¨, Q-Q Plot ì œê³µ |
| **ì¶”ì„¸** | `mann_kendall_test` | Trend, Slope, ì‹œê³„ì—´ ì¶”ì„¸ì„  |
| **ë³€ê³¡ì ** | `pettitt_test` | ë‹¨ì¼ ë³€ê³¡ì  ë° ì „í›„ ì¤‘ì•™ê°’ ë³€í™” |
| **ê·¸ë£¹ì°¨ì´** | `mann_whitney_test` | ë‘ ê·¸ë£¹ ê°„ ìˆœìœ„ ê¸°ë°˜ ì°¨ì´ ë¶„ì„ |
| | `kruskal_wallis_test` | ì„¸ ê·¸ë£¹ ì´ìƒ ë¹„êµ (ANOVA ëŒ€ì•ˆ) |
| **ìƒê´€ê´€ê³„** | `spearman_correlation` | ìˆœìœ„ ìƒê´€ê³„ìˆ˜ ë° ì‚°ì ë„ |
| | `correlation_matrix_nonparametric` | ë³€ìˆ˜ ê°„ ìƒê´€ íˆíŠ¸ë§µ |

## 7. ì¶œë ¥ í•´ì„ ê°€ì´ë“œ

ë¶„ì„ ê²°ê³¼(`summary.csv`)ì˜ `Interpretation` ì»¬ëŸ¼ì„ ì°¸ê³ í•˜ì„¸ìš”.
- **p < 0.001**: ë§¤ìš° ê°•í•œ ìœ ì˜ì„± (ê°€ì„¤ ê¸°ê° í™•ì‹¤ì‹œ)
- **p < 0.05**: ìœ ì˜í•¨ (ì¼ë°˜ì ì¸ ê¸°ì¤€ì—ì„œ ê°€ì„¤ ê¸°ê°)
- **p â‰¥ 0.05**: ìœ ì˜í•˜ì§€ ì•ŠìŒ (ê°€ì„¤ ê¸°ê° ì‹¤íŒ¨)

ë” ìì„¸í•œ ì´ë¡ ì  ë°°ê²½ì€ `01_Specs/02_ë¹„ëª¨ìˆ˜_ë¶„ì„_ì´ë¡ ê°€ì´ë“œ.md`ë¥¼ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
