# Nonparametric-Analysis 프로젝트 구조 개선 제안

**작성일**: 2024-02-13
**현재 상태**: 잘 구성됨 (75점/100점)
**개선 후 예상**: 우수함 (95점/100점)

---

## 📊 현재 상태 평가

### ✅ **강점** (잘 구성된 부분)

1. **명확한 워크플로우 구조**
   - 번호 기반 폴더 (`01_Specs` → `05_Outputs`) 구조가 직관적
   - 데이터 분석 프로젝트 라이프사이클과 완벽히 일치

2. **체계적인 문서화**
   - 5개의 Specs 문서로 다양한 사용자층 커버
   - README.md에 빠른 네비게이션 테이블 제공
   - AGENTS.md로 개발 가이드 분리

3. **코드 구조 분리**
   - `src/` layout 패턴 사용 (Python 권장 사항)
   - 스크립트와 패키지 코드 명확히 분리

4. **최신 도구 채택**
   - `uv` 패키지 매니저 사용
   - FastAPI 기반 API 스켈레톤

### ⚠️ **개선 필요 사항**

| 문제점 | 심각도 | 영향 |
|--------|--------|------|
| 중복 `outputs/` 폴더 존재 | 중간 | 혼란 유발 |
| 루트에 산재된 스크립트 파일 | 높음 | 프로젝트 구조 불명확 |
| README.md 최신 변경사항 미반영 | 중간 | 문서-실제 불일치 |
| `.gitignore` 부재 | 낮음 | 불필요한 파일 커밋 위험 |
| 노트북 final vs template 구분 불명확 | 낮음 | 사용법 혼란 |

---

## 🎯 개선 계획

### **Phase 1: 구조 정리 (즉시 실행 가능)**

#### 1.1 중복 폴더 제거
```bash
# outputs/ → 05_Outputs/로 통합
rm -rf outputs/
```

#### 1.2 루트 스크립트 파일 정리
```bash
# 개발용 스크립트
mkdir -p 03_Code/scripts/dev/
mv add_explanations.py 03_Code/scripts/dev/
mv update_notebook_final.py 03_Code/scripts/dev/

# 테스트 파일
mv test_all_methods.py tests/
mv test_boxplot_empty.py tests/
mv test_log.txt 05_Outputs/

# __pycache__ 제거
rm -rf __pycache__/
```

**개선 후 루트 구조:**
```
Nonparametric-Analysis/
├── 01_Specs/
├── 02_Data/
├── 03_Code/
├── 04_Notebooks/
├── 05_Outputs/
├── 99_Archive/
├── tests/
├── main.py           ← FastAPI 앱만
├── pyproject.toml
├── CLAUDE.md
├── AGENTS.md
└── README.md
```

#### 1.3 문서 업데이트
- [ ] `README.md` 교체 (`README_NEW.md` → `README.md`)
- [ ] `.gitignore` 추가 (`.gitignore_NEW` → `.gitignore`)
- [ ] 노트북 설명 명확화

---

### **Phase 2: 문서 체계 강화 (선택)**

#### 2.1 문서 간 상호참조 개선

**`01_Specs/README.md` 신규 추가:**
```markdown
# Specs 문서 가이드

## 문서별 대상 독자

1. **01_비모수_분석_spec.md** - 기획자, PM
2. **02_비모수_분석_이론가이드.md** - 데이터 과학자, 통계학자
3. **03_비모수_보고서_템플릿.md** - 보고서 작성자
4. **04_비모수_분석_패키지_가이드.md** - 개발자
5. **05_비모수_통계분석_결과_해석_가이드.md** - 비전문가, 실무자

## 읽기 순서

### 빠른 시작 (비전문가)
05 → 03 → 노트북 실행

### 심화 학습 (전문가)
01 → 02 → 04 → 코드 분석
```

#### 2.2 CHANGELOG.md 추가
```markdown
# Changelog

## [Unreleased]

### Added
- 05_비모수_통계분석_결과_해석_가이드.md (일반인용 해석 가이드)
- 노트북 해석 섹션 전면 강화

### Fixed
- 모든 분석 함수 파라미터 오류 수정
- 한글 폰트 설정 개선 (macOS)

### Changed
- 프로젝트 구조 정리 (outputs/ 통합, 스크립트 이동)
```

---

### **Phase 3: 코드 구조 개선 (장기)**

#### 3.1 패키지 구조 재설계

**현재:**
```
03_Code/src/nonparametric_analysis/analysis/
├── nonparametric_methods.py    (모든 분석 함수)
├── utils.py
├── visualizations.py
...
```

**개선안:**
```
03_Code/src/nonparametric_analysis/
├── core/
│   ├── single_variable.py      (정규성, 런, 추세, 변곡점)
│   ├── group_comparison.py     (Mann-Whitney, K-S, Wilcoxon, ...)
│   ├── correlation.py          (Spearman, Kendall, Distance)
│   └── resampling.py           (Bootstrap, Permutation)
├── visualization/
│   ├── plots.py
│   └── setup.py
├── reporting/
│   ├── templates.py
│   └── generator.py
└── utils/
    ├── integrity.py
    └── stats.py
```

**장점:**
- 관심사 분리 (Separation of Concerns)
- 모듈 크기 감소 → 유지보수 용이
- 테스트 작성 용이

---

## 📋 실행 체크리스트

### 즉시 실행 (Phase 1)

- [ ] 1. 백업 생성
  ```bash
  cp -r /Users/foodie/myproject/Nonparametric-Analysis \
        /Users/foodie/myproject/Nonparametric-Analysis_backup_$(date +%Y%m%d)
  ```

- [ ] 2. 구조 정리 스크립트 실행
  ```bash
  bash /tmp/cleanup_structure.sh
  ```

- [ ] 3. README.md 교체
  ```bash
  cd /Users/foodie/myproject/Nonparametric-Analysis
  mv README.md README_OLD.md
  mv README_NEW.md README.md
  ```

- [ ] 4. .gitignore 추가
  ```bash
  mv .gitignore_NEW .gitignore
  ```

- [ ] 5. 변경사항 확인
  ```bash
  git status
  git diff README.md
  ```

- [ ] 6. Git 커밋
  ```bash
  git add .
  git commit -m "refactor: 프로젝트 구조 정리 및 문서 업데이트

  - outputs/ → 05_Outputs/로 통합
  - 루트 스크립트 파일 정리 (03_Code/scripts/dev/, tests/)
  - README.md 업데이트 (최신 문서 반영, 노트북 설명 추가)
  - .gitignore 추가
  - __pycache__ 제거
  "
  ```

### 선택적 개선 (Phase 2-3)

- [ ] 7. `01_Specs/README.md` 추가
- [ ] 8. `CHANGELOG.md` 추가
- [ ] 9. 패키지 구조 재설계 검토
- [ ] 10. 코드 리팩토링 계획 수립

---

## 🎯 기대 효과

### 단기 효과 (Phase 1 완료 후)

1. **명확한 프로젝트 구조**
   - 루트 디렉토리 정리 → 핵심 파일만 보임
   - 새 팀원 온보딩 시간 50% 단축

2. **문서 정확성 향상**
   - README와 실제 구조 일치
   - 혼란 요소 제거

3. **유지보수 용이성**
   - 스크립트/테스트 파일 위치 명확
   - .gitignore로 불필요한 커밋 방지

### 장기 효과 (Phase 2-3 완료 후)

1. **확장 가능한 구조**
   - 새 분석 함수 추가 시 적절한 모듈에 배치
   - 코드 충돌 최소화

2. **문서 체계 완성**
   - 대상 독자별 문서 명확화
   - 버전 관리 (CHANGELOG)

3. **코드 품질 향상**
   - 모듈화로 테스트 용이
   - 순환 의존성 방지

---

## 📌 권장사항

### ✅ **즉시 실행 권장 (Phase 1)**

- 구조 정리 및 문서 업데이트
- 백업 후 진행하면 안전
- 소요 시간: 30분

### 🤔 **검토 후 실행 (Phase 2-3)**

- 팀 규모 확대 시 패키지 재구조화 고려
- 현재는 모놀리식 구조도 충분히 작동
- 파일 개수 20개 이상 시 재검토

---

## 📖 참고 자료

- [Python Packaging Guide - src layout](https://packaging.python.org/en/latest/discussions/src-layout-vs-flat-layout/)
- [Keep a Changelog](https://keepachangelog.com/)
- [Semantic Versioning](https://semver.org/)
- [12 Factor App](https://12factor.net/)

---

**다음 단계**: 이 제안서를 검토하고, Phase 1 실행 여부를 결정해주세요.
